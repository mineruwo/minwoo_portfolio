<template>
  <div class="content-container">
    <h2>ğŸ“š í”„ë¡œì íŠ¸ (Projects)</h2>
    <h3 id="professional-projects" ref="professionalProjectsRef">ì‹¤ë¬´ í”„ë¡œì íŠ¸ (Professional Projects)</h3>
    <div class="project-list">
      <div v-for="project in professionalProjects" :key="project.id" class="project-card">
        <div class="project-header" @click="toggleExpand(project)">
          <h3>{{ project.title }}</h3>
          <span class="expand-icon">{{ project.isExpanded ? 'â–²' : 'â–¼' }}</span>
        </div>
        <transition name="expand">
          <div v-if="project.isExpanded" class="project-details">
            <ImageCarousel
              :images="project.images"
              :bannerText="project.bannerText"
              bannerTextColor="#ffffff"
              :interval="3000"
            />
            <p><strong>ê°œìš”:</strong> {{ project.description }}</p>
            <p><strong>ì‚¬ìš© ê¸°ìˆ :</strong>
              <code v-for="(tech, index) in project.techStack" :key="index">{{ tech }}</code>
            </p>
            <p v-if="project.link">
              <strong>ìì„¸íˆ ë³´ê¸°:</strong> <a :href="project.link" target="_blank" rel="noopener noreferrer">ë§í¬</a>
            </p>
          </div>
        </transition>
      </div>
    </div>

    <h3 id="study-projects" ref="studyProjectsRef">í•™ìŠµ í”„ë¡œì íŠ¸ (Study Projects)</h3>
    <div class="project-list">
      <div v-for="project in studyProjects" :key="project.id" class="project-card">
        <div class="project-header" @click="toggleExpand(project)">
          <h3>{{ project.title }}</h3>
        </div>
        <transition name="expand">
          <div v-if="project.isExpanded" class="project-details">
            <ImageCarousel
              :images="project.images"
              :bannerText="project.bannerText"
              bannerTextColor="#ffffff"
              :interval="3000"
            />
            <p><strong>ê°œìš”:</strong> {{ project.description }}</p>
            <p><strong>ì‚¬ìš© ê¸°ìˆ :</strong>
              <code v-for="(tech, index) in project.techStack" :key="index">{{ tech }}</code>
            </p>
            <p v-if="project.link">
              <strong>ìì„¸íˆ ë³´ê¸°:</strong> <a :href="project.link" target="_blank" rel="noopener noreferrer">ë§í¬</a>
            </p>
          </div>
        </transition>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue';
import ImageCarousel from './ImageCarousel.vue'; // Import the new carousel component

const professionalProjectsRef = ref(null);
const studyProjectsRef = ref(null);

const projects = ref([
  {
    id: 'mirat-hair',
    type: 'professional',
    title: 'ğŸ’‡â€â™€ï¸ Mirat (í—¤ì–´ ì‹œë®¬ë ˆì´ì…˜)',
    link: 'https://www.mirart.co.kr/',
    description: 'Unityì™€ OpenCVë¥¼ í™œìš©í•œ í—¤ì–´ ì‹œë®¬ë ˆì´ì…˜ ì„œë¹„ìŠ¤ì˜ í•µì‹¬ ê¸°ëŠ¥ì„ ê°œë°œí•˜ê³ , ì•±ì„ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€ ë³´ìˆ˜í–ˆìŠµë‹ˆë‹¤.',
    techStack: ['Unity', 'OpenCV'],
    images: ['/img/placeholder-mirat-hair-1.jpg', '/img/placeholder-mirat-hair-2.jpg'],
    bannerText: 'Mirat Hair Simulation',
    isExpanded: false,
  },
  {
    id: 'mirat-beauty',
    type: 'professional',
    title: 'ğŸ’„ Mirat Beauty (ë°˜ì˜êµ¬ ì‹œë®¬ë ˆì´ì…˜)',
    link: 'https://www.mirart.co.kr/',
    description: 'Unityì™€ Image Server API í†µì‹ ì„ ì´ìš©í•œ ë°˜ì˜êµ¬ ì‹œìˆ  ì‹œë®¬ë ˆì´ì…˜ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ê³  ëŸ°ì¹­ í›„ ìœ ì§€ ë³´ìˆ˜ë¥¼ ë‹´ë‹¹í–ˆìŠµë‹ˆë‹¤.',
    techStack: ['Unity', 'Image Server API'],
    images: ['/img/placeholder-mirat-beauty-1.jpg', '/img/placeholder-mirat-beauty-2.jpg'],
    bannerText: 'Mirat Beauty Simulation',
    isExpanded: false,
  },
  {
    id: 'mirat-studio',
    type: 'professional',
    title: 'ğŸ“¸ Mirat Studio (í¬í†  ìŠ¤íŠœë””ì˜¤)',
    link: 'https://www.mirartstudio.kr/',
    description: 'Unity, OpenCV, CameraSDK ë“±ì„ í™œìš©í•˜ì—¬ í¬í†  ìŠ¤íŠœë””ì˜¤ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ê³  êµ­ë‚´ì™¸ ëŸ°ì¹­ ë° ìœ ì§€ ë³´ìˆ˜ë¥¼ ì´ê´„í–ˆìŠµë‹ˆë‹¤.',
    techStack: ['Unity', 'OpenCV', 'Local ImageServer API', 'CameraSDK'],
    images: ['/img/placeholder-mirat-studio-1.jpg', '/img/placeholder-mirat-studio-2.jpg'],
    bannerText: 'Mirat Photo Studio',
    isExpanded: false,
  },
  {
    id: 'oshi-poster',
    type: 'professional',
    title: 'âœ¨ Oshi Poster (3D í¬ìŠ¤í„°)',
    link: 'https://xrdive.net/oshiposter/',
    description: '3D Depth ì¹´ë©”ë¼ì™€ Unity, OpenCVë¥¼ ì´ìš©í•œ 3D í¬ìŠ¤í„° ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí–ˆìŠµë‹ˆë‹¤.',
    techStack: ['Volt CameraSDK', 'Astra 3D depth CameraSDK', 'Unity', 'OpenCV'],
    images: ['/img/placeholder-oshi-poster-1.jpg', '/img/placeholder-oshi-poster-2.jpg'],
    bannerText: 'Oshi Poster 3D',
    isExpanded: false,
  },
  {
    id: 'mirat-app',
    type: 'professional',
    title: 'ğŸ“± Mirat App (ê³ ê° ê´€ë¦¬ ì•±)',
    link: 'https://play.google.com/store/search?q=%EB%AF%B8%EB%9D%BC%ED%8A%B8&c=apps',
    description: 'ê³ ê° ê´€ë¦¬ë¥¼ ìœ„í•œ Mirat ì—°ë™ ì•±ì„ Unityì™€ UniWebViewë¥¼ ì´ìš©í•˜ì—¬ ê°œë°œ ë° ëŸ°ì¹­í–ˆìŠµë‹ˆë‹¤.',
    techStack: ['Unity', 'UniWebView'],
    images: ['/img/placeholder-mirat-app-1.jpg', '/img/placeholder-mirat-app-2.jpg'],
    bannerText: 'Mirat Customer App',
    isExpanded: false,
  },
  {
    id: 'cargo-platform',
    type: 'study',
    title: 'ğŸšš í™”ë¬¼ ìš´ì†¡ ì¤‘ê°œ í”Œë«í¼',
    link: 'https://docs.google.com/presentation/d/1-f2L11L-bgyGYkBMXS3jffJ7c0uVMkKS-1JRHorLUuo/edit?usp=sharing',
    description: 'í™”ë¬¼ì£¼ì™€ ì°¨ì£¼ë¥¼ ì—°ê²°í•˜ëŠ” ìš´ì†¡ ì¤‘ê°œ í”Œë«í¼ì„ ê¸°íší•˜ê³  ê°œë°œí–ˆìŠµë‹ˆë‹¤. ì‹¤ì‹œê°„ ì¶”ì , ì •ì‚° ë“± í•µì‹¬ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.',
    techStack: ['Java', 'React', 'JavaScript', 'PostgreSQL', 'Supabase', 'Render'],
    images: ['/img/placeholder-cargo-1.jpg', '/img/placeholder-cargo-2.jpg'],
    bannerText: 'Cargo Platform',
    isExpanded: false,
  },
  {
    id: 'clothing-mall',
    type: 'study',
    title: 'ğŸ‘• ì˜ë¥˜ ì‡¼í•‘ëª° í´ë¡ ',
    link: 'https://docs.google.com/presentation/d/1Q1C6WtoUIJLVbGpRb6FffnpWh_nJckB9g26RgKeLu5o/edit?usp=sharing',
    description: 'ê°€ìƒì˜ ì˜ë¥˜ ì‡¼í•‘ëª°ì„ ì œì‘í•˜ì—¬ ì‹¤ì œ ì„œë¹„ìŠ¤ì™€ ê°€ê¹Œìš´ UI/UX ë° ê¸°ëŠ¥ êµ¬í˜„ì„ ëª©í‘œë¡œ ê°œë°œì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.',
    techStack: ['HTML', 'CSS', 'JavaScript', 'VSCode'],
    images: ['/img/placeholder-clothing-1.jpg', '/img/placeholder-clothing-2.jpg'],
    bannerText: 'Clothing Mall Clone',
    isExpanded: false,
  },
  {
    id: 'untitled-goose',
    type: 'study',
    title: 'ğŸ¦† Untitled Goose Game ëª¨ì‘',
    link: 'https://docs.google.com/presentation/d/1tFk5OIsFmb7sqxBz_EefUPv6yLcLnzJtOdg4nU9aWDc/edit?usp=sharing',
    description: 'Unity ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ \'Untitled Goose Game\'ì˜ í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜ì¸ í¼ì¦ ë° ì ì… í”Œë ˆì´ë¥¼ êµ¬í˜„í•˜ëŠ” ëª¨ì‘ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.',
    techStack: ['Unity', 'C#', 'Git'],
    images: ['/img/placeholder-goose-1.jpg', '/img/placeholder-goose-2.jpg'],
    bannerText: 'Untitled Goose Game Clone',
    isExpanded: false,
  },
  {
    id: 'into-the-breach',
    type: 'study',
    title: 'ğŸ¤– Into the Breach ëª¨ì‘',
    link: 'https://docs.google.com/presentation/d/1av6Px3jQs6zry_Fy-_HpJ-revbCaAJn1lAppDcN884k/edit?usp=sharing',
    description: 'Into the Breach\'ì˜ íƒ€ì¼ ê¸°ë°˜ ì „ëµ ë° ë¡œê·¸ë¼ì´í¬ ìš”ì†Œë¥¼ ë¶„ì„í•˜ê³ , Unityë¥¼ í†µí•´ 1ì¸ ê°œë°œë¡œ ê²Œì„ ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.',
    techStack: ['Unity', 'C#', 'Git'],
    images: ['/img/placeholder-breach-1.jpg', '/img/placeholder-breach-2.jpg'],
    bannerText: 'Into the Breach Clone',
    isExpanded: false,
  },
  {
    id: 'celeste',
    type: 'study',
    title: 'ğŸ“ Celeste ëª¨ì‘',
    link: 'https://docs.google.com/presentation/d/1kiEqAuKJ2osnIdRzIdB5Zn74QNlmbaswn0sxYewhOd8/edit?usp=sharing',
    description: 'SFML ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ \'Celeste\'ì˜ ì •êµí•œ í”Œë«í¬ë¨¸ ë¬¼ë¦¬ ë° ì•¡ì…˜ì„±ì„ êµ¬í˜„í•˜ëŠ” í”„ë¡œì íŠ¸ë¥¼ íŒ€ì›ë“¤ê³¼ í•¨ê»˜ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.',
    techStack: ['SFML', 'C++', 'Git'],
    images: ['/img/placeholder-celeste-1.jpg', '/img/placeholder-celeste-2.jpg'],
    bannerText: 'Celeste Clone',
    isExpanded: false,
  },
]);

const professionalProjects = computed(() => projects.value.filter(p => p.type === 'professional'));
const studyProjects = computed(() => projects.value.filter(p => p.type === 'study'));

const toggleExpand = (project) => {
  project.isExpanded = !project.isExpanded;
};

defineExpose({
  professionalProjectsRef,
  studyProjectsRef
});
</script>

<style scoped>
.content-container {
  color: var(--color-text);
  line-height: 1.6;
}

h2 {
  font-size: 2.5rem;
  border-bottom: 1px solid #444;
  padding-bottom: 0.5rem;
  margin-bottom: 2rem;
}

h3 {
  font-size: 1.8rem;
  margin-top: 2.5rem;
  margin-bottom: 1.5rem;
}

.project-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  margin-bottom: 3rem;
}

.project-card {
  background-color: var(--color-background-soft);
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  overflow: hidden;
  transition: all 0.3s ease;
}

.project-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem;
  cursor: pointer;
  background-color: var(--color-background-mute);
  border-bottom: 1px solid var(--color-border);
}

.project-header h3 {
  margin: 0;
  font-size: 1.5rem;
  color: var(--color-heading);
}

.expand-icon {
  font-size: 1.5rem;
  color: var(--color-text);
  transition: transform 0.3s ease;
}

.project-header:hover .expand-icon {
  transform: rotate(180deg);
}

.project-details {
  padding: 1.5rem;
  background-color: var(--color-background-soft);
  border-top: 1px solid var(--color-border);
}

.project-details p {
  margin-bottom: 1rem;
}

.project-details code {
  background-color: #444;
  padding: 0.2rem 0.4rem;
  border-radius: 4px;
  font-size: 0.9rem;
  margin-right: 0.5rem;
  display: inline-block;
  margin-bottom: 0.5rem;
}

.project-details a {
  color: var(--color-text);
  font-weight: bold;
}

/* Expand Transition */
.expand-enter-active, .expand-leave-active {
  transition: all 0.3s ease-in-out;
  overflow: hidden;
}

.expand-enter-from, .expand-leave-to {
  max-height: 0;
  opacity: 0;
  padding-top: 0;
  padding-bottom: 0;
}

.expand-enter-to, .expand-leave-from {
  max-height: 500px; /* Adjust based on max content height */
  opacity: 1;
}
</style>
